# Smart Home Control

**Smart Home Control** — это мобильное приложение, разработанное на Flutter для курсовой работы, предназначенное для управления устройствами умного дома, в частности, реле на базе микроконтроллера ESP8266. Приложение позволяет пользователям обнаруживать, добавлять и управлять релейными модулями в локальной сети, а также создавать и выполнять сценарии автоматизации.

## Обзор проекта

Проект включает в себя:

*   **Мобильное приложение (Flutter):** Пользовательский интерфейс для взаимодействия с устройствами и сценариями.
*   **Прошивка для ESP8266 (C++/Arduino):** Логика работы релейного модуля, включая HTTP API для управления.

## Основные технологии

*   **Фреймворк:** Flutter
*   **Язык программирования (приложение):** Dart
*   **Язык программирования (микроконтроллер):** C++/Arduino
*   **Микроконтроллер:** ESP8266
*   **Управление состоянием (Flutter):** Provider
*   **HTTP-взаимодействие:** `http` пакет
*   **Обнаружение устройств:** `multicast_dns` (mDNS) и сканирование IP-диапазона
*   **Локальное хранение (Flutter):** `shared_preferences`

## Ключевые функции

### Управление устройствами
*   Автоматическое обнаружение и ручное добавление устройств.
*   Отображение списка устройств и их статуса.
*   Обновление статуса и удаление устройств.
*   Просмотр информации об устройстве (IP, RSSI, активные реле).

### Управление реле
*   Переключение состояния каждого реле.
*   Отображение текущего состояния реле.
*   Переименование реле (имена сохраняются на ESP8266).

### Управление сценариями
*   Создание, редактирование и удаление сценариев.
*   Настройка действий в сценарии (выбор устройства, реле, операция, задержка).
*   Активация/деактивация сценариев и отдельных действий.
*   Визуализация сценариев с помощью цвета и иконки.

### Выполнение сценариев
*   Запуск активных сценариев.
*   Подробный лог выполнения каждого шага сценария.
*   Возможность выполнения сценария на стороне ESP8266 или последовательно из приложения.

## Структура проекта

*   **`lib/`**: Исходный код Flutter-приложения.
    *   `main.dart`: Точка входа, инициализация, настройка темы.
    *   `models/`: Модели данных (`RelayDevice`, `Scenario`).
    *   `providers/`: Управление состоянием (`DeviceProvider`, `ScenarioProvider`).
    *   `services/`: Бизнес-логика и взаимодействие с ESP8266 (`RelayService`).
    *   `screens/`: UI-экраны приложения.
    *   `widgets/`: Переиспользуемые UI-компоненты.
*   **`esp8266_relay_controller/`**: Прошивка для микроконтроллера ESP8266.
    *   `esp8266_relay_controller.ino`: Основной файл прошивки.

## Зависимости (Flutter - `pubspec.yaml`)

Основные зависимости включают:
*   `http`: Для HTTP-запросов.
*   `multicast_dns`: Для mDNS обнаружения.
*   `provider`: Для управления состоянием.
*   `shared_preferences`: Для локального хранения.
*   `uuid`: Для генерации уникальных ID.

Полный список зависимостей можно найти в файле `pubspec.yaml`.

## Пользовательский интерфейс

Приложение имеет интуитивно понятный интерфейс с вкладками "Устройства" и "Сценарии", экранами для добавления устройств, создания/редактирования сценариев и просмотра логов выполнения.

## Сборка и запуск

### Прошивка ESP8266
1.  Откройте `esp8266_relay_controller/esp8266_relay_controller.ino` в Arduino IDE или PlatformIO.
2.  Скомпилируйте и загрузите прошивку на ESP8266.
    *   При первом запуске или сбросе настроек ESP8266 создаст точку доступа "SmartRelay" для конфигурации Wi-Fi.

### Flutter-приложение
1.  Убедитесь, что у вас установлен Flutter SDK.
2.  Перейдите в корневую директорию проекта.
3.  Выполните `flutter pub get` для установки зависимостей.
4.  Запустите приложение на эмуляторе или физическом устройстве с помощью команды `flutter run`.

## Начало работы

Если это ваш первый проект на Flutter, вот несколько полезных ресурсов:

- [Lab: Write your first Flutter app](https://docs.flutter.dev/get-started/codelab)
- [Cookbook: Useful Flutter samples](https://docs.flutter.dev/cookbook)

Для получения дополнительной информации о разработке на Flutter обратитесь к [официальной документации](https://docs.flutter.dev/).
